1. Always backup your current clapf.conf file


2. Do a "make install" to replace your old binaries, and other stuff.


3. If you already have a clapf.conf file "make install" will not
update it, you should review the newer config file and modify it
according to your settings.


4. create the whitelist table:

create table if not exists t_white_list (
        email char(64) primary key not null,
        uid int default 0
);
create index t_white_list_idx on t_white_list (email);


5. Modify the existing t_token table *IF* it has no 'timestamp' column:

ALTER TABLE t_token ADD COLUMN timestamp int default 0;
UPDATE t_token SET timestamp=UNIX_TIMESTAMP();

if you are using SQLite3, then use the current unix timestamp.


6. Update the t_misc table IF it has NOT the following schema:

create table if not exists t_misc (
        nham int default 0,
        nspam int default 0,
        uid int unsigned default 0
);
create index t_misc_idx on t_misc(uid);

In this case, issue the following SQL statements:

ALTER TABLE t_misc CHANGE COLUMN N_HAM nham int unsigned default 0;
ALTER TABLE t_misc CHANGE COLUMN N_SPAM nspam int unsigned default 0;


