<html>
<title>OCR - image spams</title>
<link rel="stylesheet" type="text/css" href="style.css">
<body bgcolor=white text=darkblue vlink=#AC003A>
<blockquote>

<h1><img src="logo.png"></h1>

<h2>OCR - image spams</h2>

I suppose you hate image spams just as I do. Most of the spam filter applications cannot do
anything with the image spams of our days. Ok, image spams have some textual part but spammers are
clever enough to make hard times for any statistical filter. They insert random and neutral text
to fool us. And they used to succeed. But not any longer.
Clapf is able to use <a href="http://jocr.sourceforge.net/">gocr</a> to parse images and extract
the textual info.<p>

<strong><u>Installation and configuration</u></strong><p>

1. Install the <a href="http://netpbm.sourceforge.net/">netpbm</a> package. The <i>"super stable"</i>
version should be fine.<p>

2. Install the <a href="http://jocr.sourceforge.net/">gocr</a> application (0.41 is known to work).<p>

3. Edit clapf.conf and specify the path of the gocr utility:

<pre>
gocr=/usr/bin/gocr
</pre>

4. Recompile clapf (you need <strong>0.3.28-rc3</strong> or later) if necessary then issue a
<b>killall -HUP clapf</b> command.<p>

If you want to disable this feature just comment the <i>gocr=</i> line out in clapf.conf
then issue a <b>killall -HUP clapf</b> command.<p>

Further notes. Clapf tries to classify the message according to its textual part - if possible.
If the spamicity value is between DEFAULT_SPAMICITY (.5) and spam_overall_limit clapf will
run the OCR test.<p>

Please also note that the OCR processing is pretty resource intensive. Generally it requires
spawing another process (running the <i>gocr</i> program) which also spawns another process
(<i>netpbm</i> or <i>giftopnm</i>).

On my computer such a message took ~320 ms to finish the classification.<p>

Please also note that the current OCR implementation takes care of the first image only as
nowdays spammers send only one image.<p>


From 0.3.28-rc3 you may catch .doc attachment spams too. Just install the <a href="http://www.45.free.net/~vitus/software/catdoc/">catdoc</a>
package (0.94.2 is fine). Then set the following in clapf.conf:<p>

<pre>
catdoc=/usr/bin/catdoc
</pre>

<center><a href="index.html">home</a></center><p>

</blockquote>
</body></html>
