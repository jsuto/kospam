SHELL = @SHELL@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
sbindir = @sbindir@
includedir = @includedir@
libdir = @libdir@
libexecdir = @libexecdir@
srcdir = @srcdir@
sysconfdir = @sysconfdir@
mandir = @mandir@
datarootdir = @datarootdir@
localstatedir = @localstatedir@

CC = @CC@
CFLAGS = @CFLAGS@ @CPPFLAGS@
DEFS = @defs@
INCDIR = -I. -I../.. @INCDIR@ @mysql_includes@
LIBDIR = -L../.. @LIBDIR@ @LDFLAGS@
LIBS = @LIBS@ @mysql_libs@ -lsqlite3 -lpthread
LDAP_LIBS = @ldap_libs@
OBJS = ooop-util.o prefs.o remote_auth.o pop3_session.o

all: ooop

ooop:	% : %.o $(OBJS)
	$(CC) $(CFLAGS) $(INCDIR) $(DEFS) -o $@ $^ -lclapf -lssl -lcrypto -ldl  $(LIBS) $(LDAP_LIBS) $(LIBDIR)

%.o: $(srcdir)/%.c
	$(CC) $(CFLAGS) -fPIC $(INCDIR) $(DEFS) -c $< -o $@


clean:
	rm -f *.o *.a *.so ooop

dist_clean distclean: clean
	rm -f Makefile
