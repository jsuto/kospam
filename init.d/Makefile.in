SHELL = @SHELL@

prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
sbindir = @sbindir@
includedir = @includedir@
libdir = @libdir@
libexecdir = @libexecdir@
srcdir = @srcdir@
sysconfdir = @sysconfdir@
mandir = @mandir@
datarootdir = @datarootdir@
localstatedir = @localstatedir@

CC = @CC@
CFLAGS = @CFLAGS@ @CPPFLAGS@
DEFS = @defs@
INCDIR = -I. -I../.. -I../../src @INCDIR@ @mysql_includes@
LIBDIR = -L. @LIBDIR@ @LDFLAGS@ -L../../src
LIBS = @LIBS@ @mysql_libs@
LDAP_LIBS = @ldap_libs@

INSTALL = @INSTALL@

all:
	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/clapf.ubuntu.in > $(srcdir)/clapf.ubuntu
	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/clapf.redhat.in > $(srcdir)/clapf.redhat
	sed -e "s%SBINDIR%$(sbindir)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/rc.clapf.in > $(srcdir)/rc.clapf
	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/clapf-maillog.debian.in > $(srcdir)/clapf-maillog.debian
	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/clapf-maillog.ubuntu.in > $(srcdir)/clapf-maillog.ubuntu
	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" $(srcdir)/clapf-maillog.redhat.in > $(srcdir)/clapf-maillog.redhat

	sed -e "s%_PREFIX_%$(prefix)%" -e "s%SYSCONFDIR%$(sysconfdir)%" -e "s%LOCALSTATEDIR%$(localstatedir)%" $(srcdir)/clapf-postgrey.debian.in > $(srcdir)/clapf-postgrey.debian

	sed -e "s%SBINDIR%$(sbindir)%" \
		-e "s%LIBEXECDIR%$(libexecdir)%" \
		-e "s%SYSCONFDIR%$(sysconfdir)%" < $(srcdir)/rc.clapf-maillog.in > $(srcdir)/rc.clapf-maillog


install:

clean:
	rm -f clapf.ubuntu clapf.redhat rc.clapf clapf-maillog.debian clapf-maillog.ubuntu clapf-maillog.redhat rc.clapf-maillog

distclean: clean
	rm -f Makefile
