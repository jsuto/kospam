#!/bin/sh
##

# updating RRD files

YOUR_LIBEXECDIR/clapf/clapf-rrd-update.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-ham-spam.rrd `tail -1 YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf.stat | awk '{ print $1 ":" $5 ":" $8 }'`
YOUR_LIBEXECDIR/clapf/clapf-rrd-update.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-ratio.rrd `tail -1 YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf.stat | awk '{ if($2 > 0) print $1 ":" 100*$8/$2 ":0"; else print $1 ":0:0" }'`
YOUR_LIBEXECDIR/clapf/clapf-rrd-update.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-size.rrd `tail -1 YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf.stat | awk '{ print $1 ":" $9 ":0"}'`



# creating ham-spam images

YOUR_LIBEXECDIR/clapf/clapf-rrd-graph.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-ham-spam.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/ham-spam-daily.png 'ham-spam daily' day
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-ham-spam.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/ham-spam-weekly.png 'ham-spam weekly' week
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-ham-spam.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/ham-spam-monthly.png 'ham-spam monthly' month

# creating spam ratio images

YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-ratio.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-ratio-daily.png "spam ratio daily" day
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-ratio.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-ratio-weekly.png "spam ratio weekly" week
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-ratio.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-ratio-monthly.png "spam ratio monthly" month

# creating spam size images

YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-size.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-size-daily.png "spam size daily" day
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-size.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-size-weekly.png "spam size weekly" week
YOUR_LIBEXECDIR/clapf/clapf-rrd-graph-oneline.sh YOUR_LOCALSTATEDIR/lib/clapf/stat/clapf-spam-size.rrd YOUR_LOCALSTATEDIR/lib/clapf/stat/spam-size-monthly.png "spam size monthly" month

